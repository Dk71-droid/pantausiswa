<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sistem Monitoring Siswa - Dashboard Guru</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Link ke file CSS eksternal (shared style) -->
    <link rel="stylesheet" href="guru.css" />
    <!-- Chart.js CDN for graphs -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!--
      CATATAN: Blok <style> internal di sini telah dihapus sepenuhnya di iterasi sebelumnya.
      Semua gaya terkait tata letak sidebar dan konten utama
      sekarang sepenuhnya dikelola oleh file guru.css untuk menghindari konflik.
    -->
  </head>
  <body class="bg-white font-sans antialiased guru-dashboard-layout">
    <!-- Loading Overlay -->
    <div
      id="loading-overlay"
      class="fixed inset-0 bg-white bg-opacity-90 flex flex-col items-center justify-center z-40 section-hidden"
    >
      <div
        class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600 mb-4"
      ></div>
      <p class="text-gray-800 text-lg font-semibold">Memuat data...</p>
    </div>

    <!-- Toast Container -->
    <div
      id="toast-container"
      class="fixed top-4 right-4 z-50 flex flex-col space-y-2"
    ></div>

    <!-- Confirm Modal -->
    <div
      id="confirm-modal"
      class="modal fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-40 section-hidden"
    >
      <div
        class="modal-content bg-white p-6 rounded-lg shadow-xl max-w-sm w-full"
      >
        <h3 id="confirm-modal-title" class="text-lg font-bold mb-4">
          Konfirmasi
        </h3>
        <p id="confirm-modal-message" class="mb-6">
          Anda yakin ingin melanjutkan?
        </p>
        <div class="flex justify-end space-x-3">
          <button
            id="confirm-cancel-btn"
            class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300"
          >
            Batal
          </button>
          <button
            id="confirm-ok-btn"
            class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700"
          >
            OK
          </button>
        </div>
      </div>
    </div>

    <!-- Header (Fixed at Top) -->
    <header
      class="fixed top-0 left-0 w-full bg-white shadow-md p-4 flex items-center justify-between z-30 transition-all duration-300 ease-in-out"
    >
      <div class="flex items-center space-x-4">
        <button
          id="sidebar-toggle-btn"
          class="text-gray-600 focus:outline-none md:hidden"
        >
          <i class="fas fa-bars text-xl"></i>
        </button>
        <div class="text-xl font-bold text-gray-800" id="header-title"></div>
      </div>
      <div class="flex items-center space-x-3">
        <span id="guru-name-display" class="font-medium text-gray-700"
          >Nama Guru</span
        >
        <span id="guru-title-display" class="text-sm text-gray-500"
          >Jabatan</span
        >
        <button
          id="global-refresh-btn"
          class="p-2 text-blue-600 hover:text-blue-800 transition-colors duration-200"
          title="Refresh Data"
        >
          <i class="fas fa-sync-alt"></i>
        </button>
        <button
          id="logout-admin-btn"
          class="bg-red-500 hover:bg-red-600 text-white py-1 px-3 rounded-md text-sm transition-colors duration-200"
        >
          Logout
        </button>
      </div>
    </header>

    <!-- Sidebar Overlay (for mobile) -->
    <div
      id="sidebar-overlay"
      class="fixed inset-0 bg-gray-900 bg-opacity-50 z-20 md:hidden section-hidden"
    ></div>

    <!-- Main Wrapper for Sidebar and Content -->
    <div
      id="main-content-wrapper"
      class="min-h-screen pt-14 transition-transform duration-300 ease-in-out"
    >
      <!-- Sidebar -->
      <aside
        id="main-sidebar"
        class="fixed inset-y-0 left-0 w-64 bg-white shadow-lg z-30 transform -translate-x-full md:translate-x-0 md:relative md:flex-shrink-0 transition-transform duration-300 ease-in-out py-4 px-3"
      >
        <div class="flex items-center justify-between mb-6 px-4">
          <h2 class="text-2xl font-bold text-blue-600">SiswaLink</h2>
          <button id="close-sidebar-btn" class="text-gray-600 md:hidden">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <nav class="space-y-2">
          <button
            class="sidebar-button flex items-center w-full py-2 px-4 rounded-md text-gray-700 hover:bg-gray-100 transition-colors duration-200"
            data-target-section="guru-dashboard-section"
          >
            <i class="fas fa-tachometer-alt mr-3"></i> Dashboard
          </button>
          <button
            class="sidebar-button flex items-center w-full py-2 px-4 rounded-md text-gray-700 hover:bg-gray-100 transition-colors duration-200"
            data-target-section="manajemen-data-section"
          >
            <i class="fas fa-database mr-3"></i> Manajemen Data
          </button>
          <button
            class="sidebar-button flex items-center w-full py-2 px-4 rounded-md text-gray-700 hover:bg-gray-100 transition-colors duration-200"
            data-target-section="input-nilai-kehadiran-section"
          >
            <i class="fas fa-edit mr-3"></i> Input Nilai & Kehadiran
          </button>
          <button
            class="sidebar-button flex items-center w-full py-2 px-4 rounded-md text-gray-700 hover:bg-gray-100 transition-colors duration-200"
            data-target-section="rekap-data-section"
          >
            <i class="fas fa-chart-bar mr-3"></i> Rekap Data
          </button>
          <button
            class="sidebar-button flex items-center w-full py-2 px-4 rounded-md text-gray-700 hover:bg-gray-100 transition-colors duration-200"
            data-target-section="settings-section"
          >
            <i class="fas fa-cog mr-3"></i> Pengaturan
          </button>
        </nav>
      </aside>

      <!-- Main Content Area -->
      <main class="flex-1 p-6 md:p-8 bg-white overflow-y-auto">
        <!-- Login Section -->
        <section
          id="login-section"
          class="flex items-center justify-center min-h-screen bg-white"
        >
          <div class="w-full max-w-md bg-white p-8 rounded-lg shadow-md">
            <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">
              Login Guru
            </h2>
            <form id="login-form">
              <div class="mb-4">
                <label
                  for="email-input"
                  class="block text-gray-700 text-sm font-bold mb-2"
                  >Email:</label
                >
                <input
                  type="email"
                  id="email-input"
                  name="email"
                  class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                  placeholder="Masukkan email Anda"
                  required
                />
              </div>
              <div class="flex items-center justify-between">
                <button
                  type="submit"
                  class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline w-full"
                >
                  Login
                </button>
              </div>
            </form>

            <div class="mt-6 text-center">
              <p class="text-gray-600 text-sm mb-2">Atau cari data siswa:</p>
              <form id="nis-search-form" class="flex">
                <input
                  type="text"
                  id="nis-search-input"
                  placeholder="Masukkan NIS Siswa"
                  class="shadow appearance-none border rounded-l w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                />
                <button
                  type="submit"
                  class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-r-md focus:outline-none focus:shadow-outline"
                >
                  Cari
                </button>
              </form>
            </div>
          </div>
        </section>

        <!-- Guru Dashboard Section -->
        <section id="guru-dashboard-section" class="section-hidden">
          <!-- H2 element removed from here -->
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
            <div
              class="bg-white p-6 rounded-lg shadow-md flex items-center space-x-4"
            >
              <div
                class="flex-shrink-0 bg-blue-100 text-blue-600 rounded-full p-3"
              >
                <i class="fas fa-users fa-2x"></i>
              </div>
              <div>
                <p class="text-gray-500 text-sm">Total Siswa Diampu</p>
                <p
                  id="total-siswa-diampu"
                  class="text-2xl font-bold text-gray-800"
                >
                  0
                </p>
              </div>
            </div>
            <div
              class="bg-white p-6 rounded-lg shadow-md flex items-center space-x-4"
            >
              <div
                class="flex-shrink-0 bg-red-100 text-red-600 rounded-full p-3"
              >
                <i class="fas fa-tasks fa-2x"></i>
              </div>
              <div>
                <p class="text-gray-500 text-sm">Tugas Belum Selesai</p>
                <p
                  id="total-tugas-belum-selesai"
                  class="text-2xl font-bold text-gray-800"
                >
                  0
                </p>
              </div>
            </div>
            <div
              class="bg-white p-6 rounded-lg shadow-md flex items-center space-x-4"
            >
              <div
                class="flex-shrink-0 bg-yellow-100 text-yellow-600 rounded-full p-3"
              >
                <i class="fas fa-star fa-2x"></i>
              </div>
              <div>
                <p class="text-gray-500 text-sm">Rata-rata Nilai Global</p>
                <p
                  id="rata-rata-nilai-global"
                  class="text-2xl font-bold text-gray-800"
                >
                  N/A
                </p>
              </div>
            </div>
          </div>

          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-semibold text-gray-800 mb-4">
              Rata-rata Nilai Per Mata Pelajaran
            </h3>
            <div class="relative h-80">
              <canvas id="nilaiPerMapelChart"></canvas>
              <p
                id="no-nilai-chart-message"
                class="absolute inset-0 flex items-center justify-center text-gray-500 text-lg section-hidden"
              >
                Data nilai tidak tersedia untuk grafik.
              </p>
            </div>
          </div>
        </section>

        <!-- Manajemen Data Section -->
        <section id="manajemen-data-section" class="section-hidden">
          <!-- H2 element removed from here -->

          <!-- Tab Navigation for Manajemen Data -->
          <div
            class="tabs flex space-x-2 border-b border-gray-200 mb-6"
            id="tab-content-container-manajemen"
          >
            <button
              class="tab-button py-2 px-4 text-gray-600 hover:text-blue-600 border-b-2 border-transparent hover:border-blue-600 transition-colors duration-300 active"
              data-target="manajemen-data-tugas"
            >
              Tugas
            </button>
            <button
              class="tab-button py-2 px-4 text-gray-600 hover:text-blue-600 border-b-2 border-transparent hover:border-blue-600 transition-colors duration-300"
              data-target="manajemen-data-catatan"
            >
              Catatan Guru
            </button>
            <button
              class="tab-button py-2 px-4 text-gray-600 hover:text-blue-600 border-b-2 border-transparent hover:border-blue-600 transition-colors duration-300"
              data-target="manajemen-data-jadwal"
            >
              Jadwal Pelajaran
            </button>
            <button
              class="tab-button py-2 px-4 text-gray-600 hover:text-blue-600 border-b-2 border-transparent hover:border-blue-600 transition-colors duration-300"
              data-target="manajemen-data-pengumuman"
            >
              Pengumuman
            </button>
          </div>

          <!-- Tugas Tab Content -->
          <div id="manajemen-data-tugas" class="tab-content">
            <div
              class="bg-white p-6 rounded-lg shadow-md mb-6 flex justify-between items-center"
            >
              <h3 class="text-xl font-semibold text-gray-800">Daftar Tugas</h3>
              <button
                id="add-tugas-btn"
                class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline"
              >
                Tambah Tugas Baru
              </button>
            </div>

            <!-- New: Task Subject Selection Area -->
            <div
              id="tugas-subject-selection-area"
              class="section-hidden p-6 bg-white rounded-lg shadow-md mb-6"
            >
              <h4 class="text-xl font-semibold text-gray-800 mb-4">
                Pilih Mata Pelajaran untuk Tugas Baru
              </h4>
              <div class="mb-4">
                <label
                  for="tugas-selection-mata_pelajaran"
                  class="block text-gray-700 text-sm font-bold mb-2"
                >
                  Mata Pelajaran:</label
                >
                <select
                  id="tugas-selection-mata_pelajaran"
                  class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                >
                  <option value="">Pilih Mata Pelajaran</option>
                  <!-- Options will be populated by JS -->
                </select>
              </div>
              <div class="flex justify-end space-x-3">
                <button
                  id="cancel-tugas-selection-btn"
                  class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300"
                >
                  Batal
                </button>
                <button
                  id="continue-add-tugas-btn"
                  class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline"
                >
                  Lanjutkan
                </button>
              </div>
            </div>

            <!-- Tugas Table (placeholder as it's not dynamically rendered here yet) -->
            <div
              class="bg-white p-6 rounded-lg shadow-md overflow-x-auto text-center"
            >
              <p id="no-tugas-data-message" class="text-gray-500">
                Tidak ada data tugas.
              </p>
              <!-- Implement actual table rendering for tasks here if needed -->
            </div>
          </div>

          <!-- Catatan Guru Tab Content -->
          <div id="manajemen-data-catatan" class="tab-content section-hidden">
            <div
              class="bg-white p-6 rounded-lg shadow-md mb-6 flex justify-between items-center"
            >
              <h3 class="text-xl font-semibold text-gray-800">
                Daftar Catatan Guru
              </h3>
              <button
                onclick="openModal('catatan-modal')"
                class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline"
              >
                Tambah Catatan Baru
              </button>
            </div>
            <div
              class="bg-white p-6 rounded-lg shadow-md overflow-x-auto text-center"
            >
              <p id="no-catatan-data-message" class="text-gray-500">
                Tidak ada data catatan guru.
              </p>
            </div>
          </div>

          <!-- Jadwal Pelajaran Tab Content -->
          <div id="manajemen-data-jadwal" class="tab-content section-hidden">
            <div
              class="bg-white p-6 rounded-lg shadow-md mb-6 flex justify-between items-center"
            >
              <h3 class="text-xl font-semibold text-gray-800">
                Daftar Jadwal Pelajaran
              </h3>
              <button
                onclick="openModal('jadwal-modal')"
                class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline"
              >
                Tambah Jadwal Baru
              </button>
            </div>
            <div
              class="bg-white p-6 rounded-lg shadow-md overflow-x-auto text-center"
            >
              <p id="no-jadwal-data-message" class="text-gray-500">
                Tidak ada data jadwal pelajaran.
              </p>
            </div>
          </div>

          <!-- Pengumuman Tab Content -->
          <div
            id="manajemen-data-pengumuman"
            class="tab-content section-hidden"
          >
            <div
              class="bg-white p-6 rounded-lg shadow-md mb-6 flex justify-between items-center"
            >
              <h3 class="text-xl font-semibold text-gray-800">
                Daftar Pengumuman
              </h3>
              <button
                onclick="openModal('pengumuman-modal')"
                class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline"
              >
                Tambah Pengumuman Baru
              </button>
            </div>
            <div
              class="bg-white p-6 rounded-lg shadow-md overflow-x-auto text-center"
            >
              <p id="no-pengumuman-data-message" class="text-gray-500">
                Tidak ada data pengumuman.
              </p>
            </div>
          </div>
        </section>

        <!-- Input Nilai & Kehadiran Section -->
        <section id="input-nilai-kehadiran-section" class="section-hidden">
          <!-- H2 element removed from here -->

          <!-- Tab Navigation for Input Nilai & Kehadiran -->
          <div
            id="tab-content-container-input"
            class="tabs flex space-x-2 border-b border-gray-200 mb-6"
          >
            <button
              class="tab-button py-2 px-4 text-gray-600 hover:text-blue-600 border-b-2 border-transparent hover:border-blue-600 transition-colors duration-300 active"
              data-target="input-nilai-massal"
            >
              Input Nilai Massal
            </button>
            <button
              class="tab-button py-2 px-4 text-gray-600 hover:text-blue-600 border-b-2 border-transparent hover:border-blue-600 transition-colors duration-300"
              data-target="input-nilai-individu"
            >
              Input Per Anak
            </button>
            <button
              class="tab-button py-2 px-4 text-gray-600 hover:text-blue-600 border-b-2 border-transparent hover:border-blue-600 transition-colors duration-300"
              data-target="input-kehadiran"
            >
              Input Kehadiran
            </button>
          </div>

          <!-- Input Nilai Massal Tab Content -->
          <div id="input-nilai-massal" class="tab-content">
            <div
              id="massal-nilai-area"
              class="p-6 bg-white rounded-lg shadow-md"
            >
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                <div>
                  <label
                    for="massal-filter-mapel"
                    class="block text-gray-700 text-sm font-bold mb-2"
                    >Filter Mata Pelajaran:</label
                  >
                  <select
                    id="massal-filter-mapel"
                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                  >
                    <option value="all">Semua Mata Pelajaran</option>
                    <!-- Options will be populated by JS -->
                  </select>
                </div>
                <div>
                  <!-- Filter Nama Siswa (Tambahkan ini di dalam form filter nilai massal, misalnya di samping filter Mapel/Tugas) -->
                  <div class="col-span-1">
                    <label
                      for="massal-filter-nama-siswa"
                      class="block text-gray-700 text-sm font-bold mb-2"
                    >
                      Filter Nama Siswa:
                    </label>
                    <input
                      type="text"
                      id="massal-filter-nama-siswa"
                      class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                      placeholder="Ketik nama siswa..."
                    />
                  </div>
                  <label
                    for="massal-filter-tugas"
                    class="block text-gray-700 text-sm font-bold mb-2"
                    >Filter Tugas:</label
                  >
                  <select
                    id="massal-filter-tugas"
                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                  >
                    <option value="all">Semua Tugas</option>
                    <!-- Options will be populated by JS -->
                  </select>
                </div>
                <div class="flex items-end justify-end">
                  <button
                    id="apply-massal-filter-btn"
                    class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 w-full md:w-auto"
                  >
                    Terapkan Filter
                  </button>
                </div>
              </div>
              <form id="nilai-massal-form">
                <div id="massal-nilai-inputs" class="overflow-x-auto">
                  <!-- Table will be rendered here by JavaScript -->
                  <p class="text-gray-500 text-center p-4">
                    Pilih filter untuk menampilkan data.
                  </p>
                </div>
                <div class="flex justify-end space-x-3 mt-6">
                  <button
                    type="button"
                    id="cancel-massal-input-btn"
                    class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300"
                  >
                    Batal
                  </button>
                  <button
                    type="submit"
                    class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline"
                  >
                    Simpan Nilai Massal
                  </button>
                </div>
              </form>
            </div>
          </div>

          <!-- Input Per Anak Tab Content -->
          <div id="input-nilai-individu" class="tab-content section-hidden">
            <!-- Area for Individual Input Task Selection -->
            <div
              id="nilai-task-selection-area"
              class="p-6 bg-white rounded-lg shadow-md mb-6"
            >
              <h4 class="text-xl font-semibold text-gray-800 mb-4">
                Pilih Tugas untuk Input Nilai Individu
              </h4>
              <div class="mb-4">
                <label
                  for="nilai-selection-id_tugas"
                  class="block text-gray-700 text-sm font-bold mb-2"
                >
                  Pilih Tugas:</label
                >
                <select
                  id="nilai-selection-id_tugas"
                  class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                  required
                >
                  <option value="">Pilih Tugas</option>
                  <!-- Options will be populated by JS -->
                </select>
              </div>
              <div class="flex justify-end space-x-3">
                <button
                  id="cancel-nilai-selection-btn"
                  class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300"
                >
                  Batal
                </button>
                <button
                  id="continue-nilai-input-btn"
                  class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline"
                >
                  Lanjutkan
                </button>
              </div>
            </div>

            <!-- Individual Nilai Input Form - Moved from nilai-modal, now inline -->
            <div
              id="individual-nilai-form-area"
              class="section-hidden p-6 bg-white rounded-lg shadow-md"
            >
              <h3 class="text-xl font-bold mb-4">Input Nilai Individu</h3>
              <form id="nilai-form">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                  <div>
                    <label
                      for="nilai-id_nilai"
                      class="block text-gray-700 text-sm font-bold mb-2"
                      >ID Nilai:</label
                    >
                    <input
                      type="text"
                      id="nilai-id_nilai"
                      name="id_nilai"
                      class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-100 cursor-not-allowed"
                      readonly
                      required
                    />
                  </div>
                  <div>
                    <label
                      for="nilai-nis"
                      class="block text-gray-700 text-sm font-bold mb-2"
                      >Siswa (NIS - Nama):</label
                    >
                    <select
                      id="nilai-nis"
                      name="nis"
                      class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                      required
                    >
                      <option value="">Pilih Siswa</option>
                      <!-- Options populated by JS -->
                    </select>
                  </div>
                  <div>
                    <label
                      for="nilai-id_tugas"
                      class="block text-gray-700 text-sm font-bold mb-2"
                      >Tugas (ID - Nama Tugas):</label
                    >
                    <select
                      id="nilai-id_tugas"
                      name="id_tugas"
                      class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                      required
                    >
                      <option value="">Pilih Tugas</option>
                      <!-- Options populated by JS -->
                    </select>
                  </div>
                  <div>
                    <label
                      for="nilai-nilai"
                      class="block text-gray-700 text-sm font-bold mb-2"
                      >Nilai:</label
                    >
                    <input
                      type="number"
                      id="nilai-nilai"
                      name="nilai"
                      class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                      placeholder="Masukkan nilai"
                      min="0"
                      max="100"
                      required
                    />
                  </div>
                  <div>
                    <label
                      for="nilai-status_pengerjaan"
                      class="block text-gray-700 text-sm font-bold mb-2"
                      >Status Pengerjaan:</label
                    >
                    <select
                      id="nilai-status_pengerjaan"
                      name="status_pengerjaan"
                      class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                      required
                    >
                      <option value="">Pilih Status</option>
                      <option value="Tuntas">Tuntas</option>
                      <option value="Belum Tuntas">Belum Tuntas</option>
                    </select>
                  </div>
                  <div>
                    <label
                      for="nilai-tanggal_input"
                      class="block text-gray-700 text-sm font-bold mb-2"
                      >Tanggal Input:</label
                    >
                    <input
                      type="date"
                      id="nilai-tanggal_input"
                      name="tanggal_input"
                      class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                      value="<%= new Date().toISOString().split('T')[0] %>"
                      required
                    />
                  </div>
                </div>
                <div class="flex justify-end space-x-3 mt-6">
                  <button
                    type="button"
                    id="cancel-individual-nilai-input-btn"
                    class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300"
                  >
                    Batal
                  </button>
                  <button
                    type="submit"
                    class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline"
                  >
                    Simpan Nilai
                  </button>
                </div>
              </form>
            </div>
          </div>

          <!-- Input Kehadiran Tab Content -->
          <div id="input-kehadiran" class="tab-content section-hidden">
            <div
              class="bg-white p-6 rounded-lg shadow-md mb-6 flex justify-between items-center"
            >
              <h3 class="text-xl font-semibold text-gray-800">
                Input Kehadiran
              </h3>
              <button
                onclick="openModal('kehadiran-modal')"
                class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline"
              >
                Tambah Kehadiran Baru
              </button>
            </div>
            <form id="kehadiran-form" class="bg-white p-6 rounded-lg shadow-md">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label
                    for="kehadiran-id_kehadiran"
                    class="block text-gray-700 text-sm font-bold mb-2"
                    >ID Kehadiran:</label
                  >
                  <input
                    type="text"
                    id="kehadiran-id_kehadiran"
                    name="id_kehadiran"
                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-100 cursor-not-allowed"
                    readonly
                    required
                  />
                </div>
                <div>
                  <label
                    for="kehadiran-nis"
                    class="block text-gray-700 text-sm font-bold mb-2"
                    >Siswa (NIS - Nama):</label
                  >
                  <select
                    id="kehadiran-nis"
                    name="nis"
                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                    required
                  >
                    <option value="">Pilih Siswa</option>
                    <!-- Options populated by JS -->
                  </select>
                </div>
                <div>
                  <label
                    for="kehadiran-tanggal"
                    class="block text-gray-700 text-sm font-bold mb-2"
                    >Tanggal:</label
                  >
                  <input
                    type="date"
                    id="kehadiran-tanggal"
                    name="tanggal"
                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                    required
                  />
                </div>
                <div>
                  <label
                    for="kehadiran-status"
                    class="block text-gray-700 text-sm font-bold mb-2"
                    >Status Kehadiran:</label
                  >
                  <select
                    id="kehadiran-status"
                    name="status_kehadiran"
                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                    required
                  >
                    <option value="">Pilih Status</option>
                    <option value="Hadir">Hadir</option>
                    <option value="Sakit">Sakit</option>
                    <option value="Izin">Izin</option>
                    <option value="Alfa">Alfa</option>
                  </select>
                </div>
              </div>
              <div class="flex justify-end space-x-3 mt-6">
                <button
                  type="reset"
                  class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300"
                >
                  Reset
                </button>
                <button
                  type="submit"
                  class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline"
                >
                  Simpan Kehadiran
                </button>
              </div>
            </form>
          </div>
        </section>

        <!-- Rekap Data Section -->
        <section id="rekap-data-section" class="section-hidden">
          <!-- H2 element removed from here -->

          <div class="bg-white p-6 rounded-lg shadow-md mb-6">
            <div class="flex justify-between items-center mb-4">
              <h3 class="text-xl font-semibold text-gray-800">
                Filter Rekap Nilai
              </h3>
              <button
                onclick="openModal('rekap-filter-modal')"
                class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline"
              >
                Atur Filter
              </button>
            </div>

            <div
              class="bg-white p-6 rounded-lg shadow-md overflow-x-auto text-center"
            >
              <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                  <tr>
                    <th
                      scope="col"
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      NIS
                    </th>
                    <th
                      scope="col"
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Nama Siswa
                    </th>
                    <th
                      scope="col"
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Mata Pelajaran
                    </th>
                    <th
                      scope="col"
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Nama Tugas
                    </th>
                    <th
                      scope="col"
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Nilai
                    </th>
                    <th
                      scope="col"
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Status
                    </th>
                    <th
                      scope="col"
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Tanggal Input
                    </th>
                  </tr>
                </thead>
                <tbody
                  id="rekap-nilai-table-body"
                  class="bg-white divide-y divide-gray-200"
                >
                  <!-- Data will be populated by JavaScript -->
                </tbody>
              </table>
              <p
                id="no-rekap-data-message"
                class="text-gray-500 mt-4 section-hidden"
              >
                Tidak ada data rekap nilai ditemukan.
              </p>
            </div>
          </div>
        </section>

        <!-- Settings Section -->
        <section id="settings-section" class="section-hidden">
          <!-- H2 element removed from here -->

          <!-- Tab Navigation for Settings -->
          <div
            class="tabs flex space-x-2 border-b border-gray-200 mb-6"
            id="tab-content-container-settings"
          >
            <button
              class="tab-button py-2 px-4 text-gray-600 hover:text-blue-600 border-b-2 border-transparent hover:border-blue-600 transition-colors duration-300 active"
              data-target="profile-settings"
            >
              Profil
            </button>
            <button
              class="tab-button py-2 px-4 text-gray-600 hover:text-blue-600 border-b-2 border-transparent hover:border-blue-600 transition-colors duration-300"
              data-target="account-settings"
            >
              Akun
            </button>
          </div>

          <!-- Profile Settings Tab Content -->
          <div id="profile-settings" class="tab-content">
            <div class="bg-white p-6 rounded-lg shadow-md mb-6">
              <h3 class="text-xl font-semibold text-gray-800 mb-4">
                Profil Guru
              </h3>
              <div class="space-y-4">
                <div>
                  <p class="text-gray-500 text-sm">Nama Guru:</p>
                  <p id="profile-nama-guru" class="text-gray-800 font-medium">
                    -
                  </p>
                </div>
                <div>
                  <p class="text-gray-500 text-sm">Email:</p>
                  <p id="profile-email-guru" class="text-gray-800 font-medium">
                    -
                  </p>
                </div>
                <div>
                  <p class="text-gray-500 text-sm">Status:</p>
                  <p id="profile-status-guru" class="text-gray-800 font-medium">
                    -
                  </p>
                </div>
                <div>
                  <p class="text-gray-500 text-sm">Kelas Diampu:</p>
                  <p
                    id="profile-kelas-diampu"
                    class="text-gray-800 font-medium"
                  >
                    -
                  </p>
                </div>
              </div>
              <button
                class="mt-6 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline"
              >
                Edit Profil (Coming Soon)
              </button>
            </div>
          </div>

          <!-- Account Settings Tab Content -->
          <div id="account-settings" class="tab-content section-hidden">
            <div class="bg-white p-6 rounded-lg shadow-md mb-6">
              <h3 class="text-xl font-semibold text-gray-800 mb-4">
                Pengaturan Akun
              </h3>
              <p class="text-gray-600">
                Fitur pengaturan akun seperti perubahan password akan tersedia
                di versi selanjutnya.
              </p>
              <button
                class="mt-6 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline"
              >
                Ganti Password (Coming Soon)
              </button>
            </div>
          </div>
        </section>
      </main>
    </div>

    <!-- Modals (Overlay for forms) - Only non-nilai modals remain here -->

    <!-- Tugas Modal -->
    <div
      id="tugas-modal"
      class="modal fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-40 section-hidden"
    >
      <div
        class="modal-content bg-white p-6 rounded-lg shadow-xl max-w-lg w-full relative"
      >
        <button
          class="modal-close-button absolute top-3 right-3 text-gray-600 hover:text-gray-800"
        >
          <i class="fas fa-times"></i>
        </button>
        <h3 id="tugas-modal-title" class="text-lg font-bold mb-4">
          Tambah Tugas Baru
        </h3>
        <form id="tugas-form">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
            <div>
              <label
                for="tugas-id_tugas"
                class="block text-gray-700 text-sm font-bold mb-2"
                >ID Tugas:</label
              >
              <input
                type="text"
                id="tugas-id_tugas"
                name="id_tugas"
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-100 cursor-not-allowed"
                readonly
                required
              />
            </div>
            <div>
              <label
                for="tugas-nama_tugas"
                class="block text-gray-700 text-sm font-bold mb-2"
                >Nama Tugas:</label
              >
              <input
                type="text"
                id="tugas-nama_tugas"
                name="nama_tugas"
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                placeholder="Masukkan nama tugas"
                required
              />
            </div>
            <div>
              <label
                for="tugas-mata_pelajaran"
                class="block text-gray-700 text-sm font-bold mb-2"
                >Mata Pelajaran:</label
              >
              <select
                id="tugas-mata_pelajaran"
                name="mata_pelajaran"
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                required
              >
                <option value="">Pilih Mata Pelajaran</option>
                <!-- Options populated by JS -->
              </select>
            </div>
            <div>
              <label
                for="tugas-untuk_kelas"
                class="block text-gray-700 text-sm font-bold mb-2"
                >Untuk Kelas (pisahkan koma):</label
              >
              <input
                type="text"
                id="tugas-untuk_kelas"
                name="untuk_kelas"
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                placeholder="Contoh: 1A, 1B, Semua"
                required
              />
            </div>
            <div>
              <label
                for="tugas-deskripsi"
                class="block text-gray-700 text-sm font-bold mb-2"
                >Deskripsi (Opsional):</label
              >
              <textarea
                id="tugas-deskripsi"
                name="deskripsi"
                rows="3"
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                placeholder="Deskripsi singkat tugas"
              ></textarea>
            </div>
          </div>
          <div class="flex justify-end space-x-3 mt-6">
            <button
              type="reset"
              class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300"
            >
              Reset
            </button>
            <button
              type="submit"
              class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline"
            >
              Simpan Tugas
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Catatan Guru Modal -->
    <div
      id="catatan-modal"
      class="modal fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-40 section-hidden"
    >
      <div
        class="modal-content bg-white p-6 rounded-lg shadow-xl max-w-lg w-full relative"
      >
        <button
          class="modal-close-button absolute top-3 right-3 text-gray-600 hover:text-gray-800"
        >
          <i class="fas fa-times"></i>
        </button>
        <h3 id="catatan-modal-title" class="text-lg font-bold mb-4">
          Tambah Catatan Baru
        </h3>
        <form id="catatan-form">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
            <div>
              <label
                for="catatan-id_catatan"
                class="block text-gray-700 text-sm font-bold mb-2"
                >ID Catatan:</label
              >
              <input
                type="text"
                id="catatan-id_catatan"
                name="id_catatan"
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-100 cursor-not-allowed"
                readonly
                required
              />
            </div>
            <div>
              <label
                for="catatan-nis"
                class="block text-gray-700 text-sm font-bold mb-2"
                >Siswa (NIS - Nama):</label
              >
              <select
                id="catatan-nis"
                name="nis"
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                required
              >
                <option value="">Pilih Siswa</option>
                <!-- Options populated by JS -->
              </select>
            </div>
            <div>
              <label
                for="catatan-minggu_ke"
                class="block text-gray-700 text-sm font-bold mb-2"
                >Minggu Ke:</label
              >
              <input
                type="number"
                id="catatan-minggu_ke"
                name="minggu_ke"
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                placeholder="Misal: 1"
                min="1"
                required
              />
            </div>
            <div class="md:col-span-2">
              <label
                for="catatan-catatan"
                class="block text-gray-700 text-sm font-bold mb-2"
                >Catatan:</label
              >
              <textarea
                id="catatan-catatan"
                name="catatan"
                rows="4"
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                placeholder="Masukkan catatan tentang siswa"
                required
              ></textarea>
            </div>
          </div>
          <div class="flex justify-end space-x-3 mt-6">
            <button
              type="reset"
              class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300"
            >
              Reset
            </button>
            <button
              type="submit"
              class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline"
            >
              Simpan Catatan
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Jadwal Pelajaran Modal -->
    <div
      id="jadwal-modal"
      class="modal fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-40 section-hidden"
    >
      <div
        class="modal-content bg-white p-6 rounded-lg shadow-xl max-w-lg w-full relative"
      >
        <button
          class="modal-close-button absolute top-3 right-3 text-gray-600 hover:text-gray-800"
        >
          <i class="fas fa-times"></i>
        </button>
        <h3 id="jadwal-modal-title" class="text-lg font-bold mb-4">
          Tambah Jadwal Baru
        </h3>
        <form id="jadwal-form">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
            <div>
              <label
                for="jadwal-id_jadwal"
                class="block text-gray-700 text-sm font-bold mb-2"
                >ID Jadwal:</label
              >
              <input
                type="text"
                id="jadwal-id_jadwal"
                name="id_jadwal"
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-100 cursor-not-allowed"
                readonly
                required
              />
            </div>
            <div>
              <label
                for="jadwal-kelas"
                class="block text-gray-700 text-sm font-bold mb-2"
                >Kelas:</label
              >
              <input
                type="text"
                id="jadwal-kelas"
                name="kelas"
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                placeholder="Contoh: 1A"
                required
              />
            </div>
            <div>
              <label
                for="jadwal-hari"
                class="block text-gray-700 text-sm font-bold mb-2"
                >Hari:</label
              >
              <select
                id="jadwal-hari"
                name="hari"
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                required
              >
                <option value="">Pilih Hari</option>
                <option value="Senin">Senin</option>
                <option value="Selasa">Selasa</option>
                <option value="Rabu">Rabu</option>
                <option value="Kamis">Kamis</option>
                <option value="Jumat">Jumat</option>
              </select>
            </div>
            <div>
              <label
                for="jadwal-jam_mulai"
                class="block text-gray-700 text-sm font-bold mb-2"
                >Jam Mulai:</label
              >
              <input
                type="time"
                id="jadwal-jam_mulai"
                name="jam_mulai"
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                required
              />
            </div>
            <div>
              <label
                for="jadwal-jam_selesai"
                class="block text-gray-700 text-sm font-bold mb-2"
                >Jam Selesai:</label
              >
              <input
                type="time"
                id="jadwal-jam_selesai"
                name="jam_selesai"
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                required
              />
            </div>
            <div>
              <label
                for="jadwal-mata_pelajaran"
                class="block text-gray-700 text-sm font-bold mb-2"
                >Mata Pelajaran:</label
              >
              <select
                id="jadwal-mata_pelajaran"
                name="mata_pelajaran"
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                required
              >
                <option value="">Pilih Mata Pelajaran</option>
                <!-- Options populated by JS -->
              </select>
            </div>
            <div class="md:col-span-2">
              <label
                for="jadwal-guru"
                class="block text-gray-700 text-sm font-bold mb-2"
                >Guru Pengampu:</label
              >
              <input
                type="text"
                id="jadwal-guru"
                name="guru_pengampu"
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                placeholder="Nama Guru"
                required
              />
            </div>
          </div>
          <div class="flex justify-end space-x-3 mt-6">
            <button
              type="reset"
              class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300"
            >
              Reset
            </button>
            <button
              type="submit"
              class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline"
            >
              Simpan Jadwal
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Pengumuman Modal -->
    <div
      id="pengumuman-modal"
      class="modal fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-40 section-hidden"
    >
      <div
        class="modal-content bg-white p-6 rounded-lg shadow-xl max-w-lg w-full relative"
      >
        <button
          class="modal-close-button absolute top-3 right-3 text-gray-600 hover:text-gray-800"
        >
          <i class="fas fa-times"></i>
        </button>
        <h3 id="pengumuman-modal-title" class="text-lg font-bold mb-4">
          Tambah Pengumuman Baru
        </h3>
        <form id="pengumuman-form">
          <div class="grid grid-cols-1 gap-4 mb-4">
            <div>
              <label
                for="pengumuman-id_pengumuman"
                class="block text-gray-700 text-sm font-bold mb-2"
                >ID Pengumuman:</label
              >
              <input
                type="text"
                id="pengumuman-id_pengumuman"
                name="id_pengumuman"
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-100 cursor-not-allowed"
                readonly
                required
              />
            </div>
            <div>
              <label
                for="pengumuman-judul"
                class="block text-gray-700 text-sm font-bold mb-2"
                >Judul Pengumuman:</label
              >
              <input
                type="text"
                id="pengumuman-judul"
                name="judul"
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                placeholder="Masukkan judul pengumuman"
                required
              />
            </div>
            <div>
              <label
                for="pengumuman-konten"
                class="block text-gray-700 text-sm font-bold mb-2"
                >Konten Pengumuman:</label
              >
              <textarea
                id="pengumuman-konten"
                name="konten"
                rows="5"
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                placeholder="Tulis konten pengumuman di sini"
                required
              ></textarea>
            </div>
            <div>
              <label
                for="pengumuman-tanggal_publikasi"
                class="block text-gray-700 text-sm font-bold mb-2"
                >Tanggal Publikasi:</label
              >
              <input
                type="date"
                id="pengumuman-tanggal_publikasi"
                name="tanggal_publikasi"
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                value="<%= new Date().toISOString().split('T')[0] %>"
                required
              />
            </div>
          </div>
          <div class="flex justify-end space-x-3 mt-6">
            <button
              type="reset"
              class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300"
            >
              Reset
            </button>
            <button
              type="submit"
              class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline"
            >
              Simpan Pengumuman
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Rekap Filter Modal -->
    <div
      id="rekap-filter-modal"
      class="modal fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-40 section-hidden"
    >
      <div
        class="modal-content bg-white p-6 rounded-lg shadow-xl max-w-lg w-full relative"
      >
        <button
          class="modal-close-button absolute top-3 right-3 text-gray-600 hover:text-gray-800"
        >
          <i class="fas fa-times"></i>
        </button>
        <h3 class="text-lg font-bold mb-4">Atur Filter Rekap Nilai</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
          <!-- Filter Siswa -->
          <div class="col-span-1">
            <label
              for="rekap-nis-filter-modal"
              class="block text-gray-700 text-sm font-bold mb-2"
            >
              Filter Siswa:</label
            >
            <select
              id="rekap-nis-filter-modal"
              class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            >
              <option value="all">Semua Siswa</option>
              <!-- Options populated by JS -->
            </select>
          </div>
          <!-- Filter Mata Pelajaran -->
          <div class="col-span-1">
            <label
              for="rekap-mapel-filter-modal"
              class="block text-gray-700 text-sm font-bold mb-2"
            >
              Filter Mata Pelajaran:</label
            >
            <select
              id="rekap-mapel-filter-modal"
              class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            >
              <option value="all">Semua Mata Pelajaran</option>
              <!-- Options populated by JS -->
            </select>
          </div>

          <!-- Filter Tugas -->
          <div class="col-span-1">
            <label
              for="rekap-id-tugas-filter-modal"
              class="block text-gray-700 text-sm font-bold mb-2"
            >
              Filter Tugas:</label
            >
            <select
              id="rekap-id-tugas-filter-modal"
              class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            >
              <option value="all">Semua Tugas</option>
              <!-- Options populated by JS -->
            </select>
          </div>
          <!-- Filter Status -->
          <div class="col-span-1">
            <label
              for="rekap-status-filter-modal"
              class="block text-gray-700 text-sm font-bold mb-2"
            >
              Filter Status:
            </label>
            <select
              id="rekap-status-filter-modal"
              class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            >
              <option value="all">Semua Status</option>
              <option value="Tuntas">Tuntas</option>
              <option value="Belum Tuntas">Belum Tuntas</option>
            </select>
          </div>
        </div>
        <div class="flex justify-end space-x-3">
          <button
            id="cancel-rekap-filter-btn"
            class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300"
          >
            Batal
          </button>
          <button
            id="apply-rekap-filter-modal-btn"
            class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline"
          >
            Terapkan Filter
          </button>
        </div>
      </div>
    </div>

    <!-- Script for main logic -->
    <script src="dashboardguru.js"></script>
  </body>
</html>
